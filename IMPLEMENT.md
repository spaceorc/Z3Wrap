# Missing NativeLibrary Functions to Implement

Based on comparison between `c_headers/*.txt` (source of truth) and actual implementation in `Z3Wrap/Core/Interop/NativeLibrary*.cs`.

**Total functions in c_headers**: 556
**Total implemented**: 662 (includes helper functions)
**Total missing**: 37

---

## NativeLibrary.Accessors.cs (17 functions)

Accessor and introspection functions:

```
Z3_app_to_ast
Z3_datatype_update_field
Z3_func_decl_to_ast
Z3_get_array_arity
Z3_get_depth
Z3_get_finite_domain_sort_size
Z3_get_func_decl_id
Z3_get_index_value
Z3_get_quantifier_id
Z3_get_quantifier_no_pattern_ast
Z3_get_quantifier_num_no_patterns
Z3_get_quantifier_skolem_id
Z3_get_quantifier_weight
Z3_get_sort_id
Z3_pattern_to_ast
Z3_sort_to_ast
Z3_to_app
Z3_to_func_decl
```

**Note**: Some of these may be type-cast helpers (app_to_ast, sort_to_ast, etc.) that might be unnecessary in C# IntPtr-based wrapper.

---

## NativeLibrary.Arrays.cs (1 function)

Array theory operations:

```
Z3_mk_map
```

---

## NativeLibrary.BitVectors.cs (1 function)

Bitvector operations:

```
Z3_mk_bit2bool
```

---

## NativeLibrary.Configuration.cs (0 functions)

All configuration functions already implemented:
- Z3_mk_config ✓
- Z3_del_config ✓
- Z3_set_param_value ✓

---

## NativeLibrary.Context.cs (4 functions)

Context creation and control:

```
Z3_enable_concurrent_dec_ref
Z3_get_global_param_descrs
Z3_interrupt
Z3_mk_context
```

**Note**: Z3_mk_context is the non-RC version (Z3_mk_context_rc already implemented).

---

## NativeLibrary.Models.cs (3 functions)

Model construction and introspection:

```
Z3_add_const_interp
Z3_add_func_interp
Z3_get_as_array_func_decl
Z3_mk_model
```

**Note**: Some of these are for programmatically building models (rare use case).

---

## NativeLibrary.Numerals.cs (7 functions)

Type-specific numeral creation:

```
Z3_mk_int
Z3_mk_int64
Z3_mk_real
Z3_mk_real_int64
Z3_mk_unsigned_int
Z3_mk_unsigned_int64
```

Plus one from BitVectors:
```
Z3_mk_bv_numeral (could also be in NativeLibrary.BitVectors.cs)
```

**Note**: These create numerals from native types (int32, int64, etc.). Z3_mk_numeral (string-based, polymorphic) is already implemented.

---

## NativeLibrary.Statistics.cs (1 function)

Statistics introspection:

```
Z3_get_estimated_alloc_size
```

---

## NativeLibrary.StringTheory.cs (1 function)

String/sequence operations:

```
Z3_get_lstring
```

---

## NativeLibrary.Symbols.cs (1 function)

Symbol creation:

```
Z3_mk_int_symbol
```

---

## Summary by Priority

### High Priority (11 functions)
Functions that would be commonly used:

1. **NativeLibrary.Symbols.cs** (1): `Z3_mk_int_symbol`
2. **NativeLibrary.BitVectors.cs** (1): `Z3_mk_bit2bool`
3. **NativeLibrary.Arrays.cs** (1): `Z3_mk_map`
4. **NativeLibrary.Context.cs** (2): `Z3_interrupt`, `Z3_get_global_param_descrs`
5. **NativeLibrary.Numerals.cs** (6): All mk_int/mk_real variants

### Medium Priority (8 functions)
Functions for advanced use cases:

1. **NativeLibrary.Models.cs** (3): Model construction functions
2. **NativeLibrary.Accessors.cs** (5): `Z3_get_depth`, `Z3_get_index_value`, `Z3_get_finite_domain_sort_size`, `Z3_get_func_decl_id`, `Z3_get_sort_id`

### Low Priority (18 functions)
Rarely used or edge case functions:

1. **NativeLibrary.Context.cs** (2): `Z3_mk_context` (non-RC version), `Z3_enable_concurrent_dec_ref`
2. **NativeLibrary.Accessors.cs** (12): Type casts and quantifier introspection
3. **NativeLibrary.StringTheory.cs** (1): `Z3_get_lstring`
4. **NativeLibrary.Statistics.cs** (1): `Z3_get_estimated_alloc_size`

---

## Implementation Notes

### Type Cast Functions
These functions exist in Z3 C API for type system reasons:
- `Z3_app_to_ast`
- `Z3_func_decl_to_ast`
- `Z3_sort_to_ast`
- `Z3_pattern_to_ast`
- `Z3_to_app`
- `Z3_to_func_decl`

In C# P/Invoke with IntPtr for all handle types, these are identity functions (no-ops). Consider whether they need implementation or can be documented as unnecessary.

### Quantifier Accessors
Advanced quantifier introspection functions:
- `Z3_get_quantifier_id`
- `Z3_get_quantifier_skolem_id`
- `Z3_get_quantifier_weight`
- `Z3_get_quantifier_num_no_patterns`
- `Z3_get_quantifier_no_pattern_ast`

These are for advanced quantifier analysis and debugging. Low usage likelihood.

### Model Construction
Functions for programmatically building models:
- `Z3_mk_model`
- `Z3_add_func_interp`
- `Z3_add_const_interp`

Rarely used - most users get models from solvers rather than building them manually.

---

**Last Updated**: 2025-01-03
**Generated by**: Comparison of c_headers/*.txt with Z3Wrap/Core/Interop/NativeLibrary*.cs LoadFunction calls
